<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Авторизация - ПрофиШина</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="auth-container">
        <div class="logo">ПрофиШина<span class="logo-accent">.RU</span></div>
        <p class="welcome-text">Добро пожаловать в магазин шин и дисков</p>
        
        <form id="authForm" class="auth-form">
            <input type="text" id="login" placeholder="Логин" required>
            <input type="password" id="password" placeholder="Пароль" required>
            <button type="submit" class="btn btn-login">Войти</button>
            <button type="button" class="btn btn-register" onclick="toggleRegister()">Регистрация</button>
        </form>
        
        <div class="form-footer">
            <a href="#">Забыли пароль?</a>
        </div>
    </div>

    <script type="module">
        import { auth } from './server/auth.js';
        
        let isRegisterMode = false;
        
        document.getElementById('authForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const login = document.getElementById('login').value;
            const password = document.getElementById('password').value;
            
            if (isRegisterMode) {
                if (auth.register(login, password)) {
                    window.location.href = 'index.html';
                }
            } else {
                if (auth.login(login, password)) {
                    window.location.href = 'index.html';
                } else {
                    alert('Неверный логин или пароль!');
                }
            }
        });

        function toggleRegister() {
            isRegisterMode = !isRegisterMode;
            const loginBtn = document.querySelector('.btn-login');
            const registerBtn = document.querySelector('.btn-register');
            
            if (isRegisterMode) {
                loginBtn.textContent = 'Зарегистрироваться';
                registerBtn.textContent = 'Назад к входу';
            } else {
                loginBtn.textContent = 'Войти';
                registerBtn.textContent = 'Регистрация';
            }
        }
        
        window.toggleRegister = toggleRegister;
    </script>
</body>
</html>