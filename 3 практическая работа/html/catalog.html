<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ç–∞–ª–æ–≥ - –ü—Ä–æ—Ñ–∏–®–∏–Ω–∞</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
       <div class="logo">–ü—Ä–æ—Ñ–∏–®–∏–Ω–∞<span class="logo-accent">.RU</span></div>
        <nav>
            <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="catalog.html" class="active">–ö–∞—Ç–∞–ª–æ–≥</a>
        </nav>
        <div class="header-right">
            <button class="cart-btn">üõí<span class="cart-count">0</span></button>
            <button class="logout-btn" onclick="auth.logout()">–í—ã–π—Ç–∏</button>
        </div>
    </header>

    <main class="catalog">
        <div class="product-card" onclick="openModal('bridgestone')">
            <div class="product-img">
                <img src="https://avatars.mds.yandex.net/i?id=7378bf4ec032d68978da0f2415cc4c245eb40b45-4768532-images-thumbs&n=13" alt="–õ–µ—Ç–Ω—è—è —à–∏–Ω–∞ Bridgestone">
            </div>
            <div class="product-info">
                <h3 class="product-title">–®–∏–Ω–∞ –ª–µ—Ç–Ω—è—è Bridgestone</h3>
                <p class="product-price">8 490 ‚ÇΩ</p>
            </div>
            <button class="add-to-cart">–í –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>

        <div class="product-card" onclick="openModal('nokian')">
            <div class="product-img">
                <img src="https://avatars.mds.yandex.net/i?id=bcb12d1db346f5721591ab1494f9c49897231981-7755895-images-thumbs&n=13" alt="–®–∏–Ω–∞ –∑–∏–º–Ω—è—è Nokian">
            </div>
            <div class="product-info">
                <h3 class="product-title">–®–∏–Ω–∞ –∑–∏–º–Ω—è—è Nokian</h3>
                <p class="product-price">9 990 ‚ÇΩ</p>
            </div>
            <button class="add-to-cart">–í –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
        
        <div class="product-card" onclick="openModal('disks')">
            <div class="product-img">
                <img src="img/i (2).webp" alt="–î–∏—Å–∫–∏ –ª–∏—Ç—ã–µ">
            </div>
            <div class="product-info">
                <h3 class="product-title">–î–∏—Å–∫–∏ –ª–∏—Ç—ã–µ</h3>
                <p class="product-price">12 500 ‚ÇΩ</p>
            </div>
            <button class="add-to-cart">–í –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
    </main>

    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            
            <div class="modal-product">
                <div class="modal-image">
                    <img id="modalImg" src="" alt="">
                </div>
                
                <div class="modal-details">
                    <h2 id="modalTitle">–®–∏–Ω–∞ –ª–µ—Ç–Ω—è—è Bridgestone Turanza</h2>
                    
                    <div class="modal-price" id="modalPrice">8 490 ‚ÇΩ</div>
                    
                    <p id="modalDescription">–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–µ—Ç–Ω—è—è —à–∏–Ω–∞ –¥–ª—è –ª–µ–≥–∫–æ–≤—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ–µ —Å—Ü–µ–ø–ª–µ–Ω–∏–µ —Å –¥–æ—Ä–æ–≥–æ–π –∏ –∫–æ–º—Ñ–æ—Ä—Ç –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏.</p>
                    
                    <div class="size-selector">
                        <div class="size-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–º–µ—Ä:</div>
                        <div class="sizes">
                            <div class="size" onclick="selectSize(this)">195/65 R15</div>
                            <div class="size selected" onclick="selectSize(this)">205/55 R16</div>
                            <div class="size" onclick="selectSize(this)">225/45 R17</div>
                        </div>
                    </div>
                    
                    <button class="add-to-cart-btn" onclick="addToCartFromModal()">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ / –ß—É–º–∞–∫–æ–≤ –õ–µ–≤ / –®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂ "–ü—Ä–æ—Ñ–∏–®–∏–Ω–∞"
    </footer>

    <script>
        const products = {
            'bridgestone': {
                title: '–®–∏–Ω–∞ –ª–µ—Ç–Ω—è—è Bridgestone Turanza',
                price: '8 490 ‚ÇΩ',
                description: '–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–µ—Ç–Ω—è—è —à–∏–Ω–∞ –¥–ª—è –ª–µ–≥–∫–æ–≤—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ–µ —Å—Ü–µ–ø–ª–µ–Ω–∏–µ —Å –¥–æ—Ä–æ–≥–æ–π –∏ –∫–æ–º—Ñ–æ—Ä—Ç –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏.',
                image: 'https://avatars.mds.yandex.net/i?id=7378bf4ec032d68978da0f2415cc4c245eb40b45-4768532-images-thumbs&n=13'
            },
            'nokian': {
                title: '–®–∏–Ω–∞ –∑–∏–º–Ω—è—è Nokian',
                price: '9 990 ‚ÇΩ',
                description: '–ù–∞–¥–µ–∂–Ω–∞—è –∑–∏–º–Ω—è—è —à–∏–Ω–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤–æ–∂–¥–µ–Ω–∏—è –≤ —Ö–æ–ª–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è –≥–æ–¥–∞.',
                image: 'https://avatars.mds.yandex.net/i?id=bcb12d1db346f5721591ab1494f9c49897231981-7755895-images-thumbs&n=13'
            },
            'disks': {
                title: '–î–∏—Å–∫–∏ –ª–∏—Ç—ã–µ',
                price: '12 500 ‚ÇΩ',
                description: '–°—Ç–∏–ª—å–Ω—ã–µ –ª–∏—Ç—ã–µ –¥–∏—Å–∫–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è. –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω.',
                image: 'img/i (2).webp'
            }
        };

        function openModal(productId) {
            const product = products[productId];
            document.getElementById('modalTitle').textContent = product.title;
            document.getElementById('modalPrice').textContent = product.price;
            document.getElementById('modalDescription').textContent = product.description;
            document.getElementById('modalImg').src = product.image;
            
            document.getElementById('productModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('productModal').style.display = 'none';
        }

        function selectSize(element) {
            document.querySelectorAll('.size').forEach(size => {
                size.classList.remove('selected');
            });
            element.classList.add('selected');
        }

        function addToCartFromModal() {
            const selectedSize = document.querySelector('.size.selected').textContent;
            const productTitle = document.getElementById('modalTitle').textContent;
            alert(`–¢–æ–≤–∞—Ä "${productTitle}" (${selectedSize}) –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!`);
            closeModal();
            
            const cartCount = document.querySelector('.cart-count');
            cartCount.textContent = parseInt(cartCount.textContent) + 1;
        }

        window.onclick = function(event) {
            const modal = document.getElementById('productModal');
            if (event.target == modal) {
                closeModal();
            }
        }
    </script>

    <script type="module">
        import { initApp } from './server/main.js';
        import { auth } from './server/auth.js';
        
        window.auth = auth;
        
        initApp();
    </script>
</body>
</html>